<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-09-04 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180904" />
    <meta http-equiv="Content-Language" content="en" />
    <title>JDBDT &#x2013; Logging format</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="images/jdbdt-logo.png"  alt="JDBDT"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2018-09-04
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.1.1
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">JDBDT</li>
                              
      <li>
  
                          <a href="index.html" title="Home">
          <span class="none"></span>
        Home</a>
            </li>
                
      <li>
  
                          <a href="MIT_License.html" title="License">
          <span class="none"></span>
        License</a>
            </li>
                              <li class="nav-header">Reference</li>
                              
      <li>
  
                          <a href="Facade.html" title="API facade">
          <span class="none"></span>
        API facade</a>
            </li>
                
      <li>
  
                          <a href="DB.html" title="Database handles">
          <span class="none"></span>
        Database handles</a>
            </li>
                
      <li>
  
                          <a href="DataSources.html" title="Data sources">
          <span class="none"></span>
        Data sources</a>
            </li>
                
      <li>
  
                          <a href="DataSets.html" title="Data sets">
          <span class="none"></span>
        Data sets</a>
            </li>
                
      <li>
  
                          <a href="DBSetup.html" title="Database setup">
          <span class="none"></span>
        Database setup</a>
            </li>
                
      <li>
  
                          <a href="DBAssertions.html" title="Assertions">
          <span class="none"></span>
        Assertions</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Logging format</a>
          </li>
                
      <li>
  
                          <a href="Compatibility.html" title="Compatibility">
          <span class="none"></span>
        Compatibility</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="Javadoc">
          <span class="none"></span>
        Javadoc</a>
            </li>
                              <li class="nav-header">Tutorial</li>
                              
      <li>
  
                          <a href="Tutorial.html" title="Guide">
          <span class="none"></span>
        Guide</a>
            </li>
                
      <li>
  
                          <a href="http://github.com/JDBDT/jdbdt-tutorial" class="externalLink" title="Code @ GitHub">
          <span class="none"></span>
        Code @ GitHub</a>
            </li>
                              <li class="nav-header">Development</li>
                              
      <li>
  
                          <a href="http://search.maven.org/#search%7Cga%7C1%7Cjdbdt" class="externalLink" title="Maven Central">
          <span class="none"></span>
        Maven Central</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/JDBDT/jdbdt/" class="externalLink" title="Source code">
          <span class="none"></span>
        Source code</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/JDBDT/jdbdt/issues/" class="externalLink" title="Issue tracker">
          <span class="none"></span>
        Issue tracker</a>
            </li>
                
      <li>
  
                          <a href="https://travis-ci.org/JDBDT/jdbdt/" class="externalLink" title="Travis CI">
          <span class="none"></span>
        Travis CI</a>
            </li>
                
      <li>
  
                          <a href="https://ci.appveyor.com/project/edrdo/jdbdt" class="externalLink" title="AppVeyor CI">
          <span class="none"></span>
        AppVeyor CI</a>
            </li>
                
      <li>
  
                          <a href="https://sonarcloud.io/organizations/jdbdt/projects" class="externalLink" title="SonarCloud">
          <span class="none"></span>
        SonarCloud</a>
            </li>
                
      <li>
  
                          <a href="https://scan.coverity.com/projects/edrdo-jdbdt" class="externalLink" title="Coverity">
          <span class="none"></span>
        Coverity</a>
            </li>
                
      <li>
  
                          <a href="project-info.html" title="Maven reports">
          <span class="none"></span>
        Maven reports</a>
            </li>
                
      <li>
  
                          <a href="Inception.html" title="Inception">
          <span class="none"></span>
        Inception</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Logging format</h1>
<p>An XML format is used for <a href="DB.html#Logging">JDBDT log files</a> and for the output of calls to <tt>JDBDT.dump</tt>. </p>
<p><a name="Generic"></a></p>
<div class="section">
<h2><a name="Generic_format"></a>Generic format</h2>
<p>Every JDBDT log message is defined by a <tt>jdbdt-log-message</tt> XML node. For each node of this type:</p>

<ul>
  
<li>the <tt>version</tt> attribute identifies the JDBDT version in use;</li>
  
<li>the <tt>time</tt> attribute indicates the time of the message;</li>
  
<li><tt>jdbdt-log-message/context</tt> identifies the client call site related to the message (<tt>context/caller</tt>) and the API method that was invoked (<tt>context/api-method</tt>) - for both of these, there is information regarding the class, method, file, and line number (<tt>class</tt>, <tt>method</tt>, <tt>file</tt>, <tt>line</tt>);</li>
  
<li><tt>jdbdt-log-message/data-source</tt> node describes the <a href="DataSources.html">data source</a> associated to the message, if any - in that case, it informs the source type (<tt>type)</tt> the SQL code that is executed on each query to the data source (<tt>sql</tt>), plus what are the columns for the data source at stake (<tt>columns</tt>), where each column (<tt>columns/column</tt>) is detailed in terms of its index (<tt>index</tt>), label (<tt>label</tt>), and SQL type (<tt>sql-type</tt>).</li>
</ul>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;jdbdt-log-message time=&quot;...&quot; version=&quot;...&quot;&gt;
  &lt;context&gt;
    &lt;caller&gt;
      &lt;class&gt;org.foo.MyTestClass&lt;/class&gt;
      &lt;method&gt;myTestMethod&lt;/method&gt;
      &lt;file&gt;MyTest.java&lt;/file&gt;
      &lt;line&gt;999&lt;/line&gt;
    &lt;/caller&gt;
    &lt;api-method&gt;
      &lt;class&gt;org.jdbdt.JDBDT&lt;/class&gt;
      &lt;method&gt;dump&lt;/method&gt;
      &lt;file&gt;JDBDT.java&lt;/file&gt;
      &lt;line&gt;541&lt;/line&gt;
    &lt;/api-method&gt;
  &lt;/context&gt;
  &lt;data-source type=&quot;Table&quot;&gt;
    &lt;columns count=&quot;4&quot;&gt;
      &lt;column index=&quot;1&quot; label=&quot;LOGIN&quot; sql-type=&quot;VARCHAR&quot;/&gt;
      &lt;column index=&quot;2&quot; label=&quot;NAME&quot; sql-type=&quot;VARCHAR&quot;/&gt;
      &lt;column index=&quot;3&quot; label=&quot;PASSWORD&quot; sql-type=&quot;VARCHAR&quot;/&gt;
      &lt;column index=&quot;4&quot; label=&quot;CREATED&quot; sql-type=&quot;DATE&quot;/&gt;
    &lt;/columns&gt;
    &lt;sql&gt;&lt;![CDATA[SELECT login, name, password, created FROM Users]]&gt;&lt;/sql&gt;
  &lt;/data-source&gt;
</pre></div></div>
<p><a name="DataSets"></a></p></div>
<div class="section">
<h2><a name="Data_sets"></a>Data sets</h2>
<p>A <tt>data-set</tt> node displays the contents of a <a href="DataSets.html">data set</a> that associates to some JDBDT operation (e.g., <tt>populate</tt>, <tt>dump</tt>). All rows are detailed in <tt>data-set/rows</tt>. For each column in a row, a <tt>column</tt> node indicates the column value as well as its column label (<tt>label</tt> attribute) and Java type (<tt>java-type</tt>).</p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">  &lt;data-set&gt;
    &lt;rows count=&quot;4&quot;&gt;
      &lt;row&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;root&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Root User&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;I like JDBDT&lt;/column&gt;
        &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2015-01-01&lt;/column&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;linus&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Linus You Know Who&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;linux&lt;/column&gt;
        &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2014-10-31&lt;/column&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;steve&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Steve You Know Who&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;apple&lt;/column&gt;
        &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2010-05-30&lt;/column&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;bill&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Bill You Know Who&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;windows&lt;/column&gt;
        &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2016-01-01&lt;/column&gt;
      &lt;/row&gt;
    &lt;/rows&gt;
  &lt;/data-set&gt;
</pre></div></div>
<p><a name="StateAndDataSetAssertions"></a></p></div>
<div class="section">
<h2><a name="State_and_data_set_assertions"></a>State and data set assertions</h2>
<p>An <tt>assertion</tt> node refers to a <a href="DBAssertions.html#StateAssertions">database state assertion</a> or a <a href="DBAssertions.html#DataSetAssertions">data set assertion</a>. It comprises:</p>

<ul>
  
<li><tt>assertion/expected</tt> in all cases, detailing the data set that is either expected for the database state or for comparison with a given data set.</li>
  
<li><tt>assertion/errors</tt> if the assertion failed, where <tt>assertion/errors/expected</tt> and <tt>assertion/errors/actual</tt> identify the mismatch between the expected and actual data sets (matched rows are not listed).</li>
</ul>
<p><i>Illustration</i></p>
<p>In the fragment below, the assertion error relates to a mismatch between the expected and actual values of the <tt>CREATED</tt> column for the <tt>linus</tt> &#x201c;user&#x201d; row, <tt>2015-01-01</tt> (expected) versus <tt>2016-01-01</tt> (actual). The <tt>steve</tt> and <tt>bill</tt> &#x201c;users&#x201d; were matched.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;assertion&gt;
  &lt;expected count=&quot;3&quot;&gt;
    &lt;row&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;linus&lt;/column&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Linus Torvalds&lt;/column&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;linux&lt;/column&gt;
      &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2015-01-01&lt;/column&gt;
    &lt;/row&gt;
    &lt;row&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;steve&lt;/column&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Steve Jobs&lt;/column&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;macos&lt;/column&gt;
      &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2015-12-31&lt;/column&gt;
    &lt;/row&gt;
    &lt;row&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;bill&lt;/column&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Bill Gates&lt;/column&gt;
      &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;windows&lt;/column&gt;
      &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2015-09-12&lt;/column&gt;
    &lt;/row&gt;
  &lt;/rows&gt;
  &lt;errors&gt;
    &lt;expected count=&quot;1&quot;&gt;
      &lt;row&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;linus&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Linus Torvalds&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;linux&lt;/column&gt;
        &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2015-01-01&lt;/column&gt;
      &lt;/row&gt;
    &lt;/expected&gt;
     &lt;actual count=&quot;1&quot;&gt;
      &lt;row&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;linus&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Linus Torvalds&lt;/column&gt;
        &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;linux&lt;/column&gt;
        &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2016-01-01&lt;/column&gt;
      &lt;/row&gt;
    &lt;/expected&gt;
  &lt;/errors&gt;
&lt;/assertion&gt;
</pre></div></div>
<p><a name="DeltaAssertions"></a> </p></div>
<div class="section">
<h2><a name="Delta_assertions"></a>Delta assertions</h2>
<p>A <tt>delta-assertion</tt> node refers to a <a href="DBAssertions.html#DeltaAssertions">database delta assertion</a>. For an assertion where the expected delta is <b>&#x3b4; = (O, N)</b> and the actual delta is <b>&#x3b4;&#x2018; = (O&#x2019;, N&#x2019;)</b>:</p>

<ul>
  
<li><tt>assertion/expected/old-data</tt> list the entire <b>O</b> data set;</li>
  
<li><tt>assertion/expected/new-data</tt> list the entire <b>N</b> data set;</li>
  
<li><tt>errors/old-data</tt> list the mismatch between <b>O</b> (<tt>errors/old-data/expected</tt>) and <b>O&#x2019;</b> (<tt>errors/old-data/actual</tt>);</li>
  
<li><tt>errors/new-data</tt> list the mismatch between <b>N</b> (<tt>errors/new-data/expected</tt>) and <b>N&#x2019;</b> (<tt>errors/new-data/actual</tt>);</li>
</ul>
<p>Note that, as for state assertions, <tt>errors</tt> lists only rows that caused the assertion to fail, i.e., matched rows are not listed.</p>
<p><i>Illustration</i></p>
<p>The fragment below illustrates a failed delta assertion, where no database changes were expected. Both <tt>expected/old-data</tt> and <tt>expected/new-data</tt> are empty, i.e., <b>O = N = &#x2205;</b>, as in a call to <tt>assertUnchanged</tt>. The error at stake, identified in <tt>errors/old-data/actual</tt>, relates to the fact that the entry for &#x201c;user&#x201d; <tt>linus</tt> was removed.</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;delta-assertion&gt;
  &lt;expected&gt;
    &lt;old-data count=&quot;0&quot;/&gt;
    &lt;new-data count=&quot;0&quot;/&gt;
  &lt;/expected&gt;
  &lt;errors&gt;
    &lt;old-data&gt;
      &lt;expected count=&quot;0&quot;/&gt;
      &lt;actual count=&quot;1&quot;&gt;
        &lt;row&gt;
          &lt;column java-type=&quot;java.lang.String&quot; label=&quot;LOGIN&quot;&gt;linus&lt;/column&gt;
          &lt;column java-type=&quot;java.lang.String&quot; label=&quot;NAME&quot;&gt;Linus Torvalds&lt;/column&gt;
          &lt;column java-type=&quot;java.lang.String&quot; label=&quot;PASSWORD&quot;&gt;linux&lt;/column&gt;
          &lt;column java-type=&quot;java.sql.Date&quot; label=&quot;CREATED&quot;&gt;2015-01-01&lt;/column&gt;
        &lt;/row&gt;
      &lt;/actual&gt;
    &lt;/old-data&gt;
    &lt;new-data&gt;
      &lt;expected count=&quot;0&quot;/&gt;
      &lt;actual count=&quot;0&quot;/&gt;
    &lt;/new-data&gt;
  &lt;/errors&gt;
&lt;/delta-assertion&gt;

&lt;a name=&quot;DatabaseExceptions&quot;&gt;&lt;/a&gt;  
</pre></div></div></div>
<div class="section">
<h2><a name="Database_exceptions"></a>Database exceptions</h2>
<p>A <tt>database-exception</tt> node refers to the stack trace of an <tt>SQLException</tt> thrown by the database engine during the execution of a JDBDT operation. </p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;database-exception&gt;&lt;![CDATA[
java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: XXX in statement [SELECT XXX FROM Users]
    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCUtil.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.&lt;init&gt;(Unknown Source)
    at org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source)
    at org.jdbdt.DB.compile(DB.java:276)
... [etc]
]]&gt;&lt;/database-exception&gt;
</pre></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016&#x2013;2018
                        <a href="http://jdbdt.org">JDBDT</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
