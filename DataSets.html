<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2017-04-08 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170408" />
    <meta http-equiv="Content-Language" content="en" />
    <title>JDBDT &#x2013; Data sets</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="images/jdbdt-logo.png"  alt="JDBDT"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2017-04-08
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.8
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">JDBDT</li>
                              
      <li>
  
                          <a href="index.html" title="Home">
          <span class="none"></span>
        Home</a>
            </li>
                
      <li>
  
                          <a href="http://www.eclipse.org/legal/epl-v10.html" class="externalLink" title="License">
          <span class="none"></span>
        License</a>
            </li>
                              <li class="nav-header">Reference</li>
                              
      <li>
  
                          <a href="Facade.html" title="API facade">
          <span class="none"></span>
        API facade</a>
            </li>
                
      <li>
  
                          <a href="DB.html" title="Database handles">
          <span class="none"></span>
        Database handles</a>
            </li>
                
      <li>
  
                          <a href="DataSources.html" title="Data sources">
          <span class="none"></span>
        Data sources</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Data sets</a>
          </li>
                
      <li>
  
                          <a href="DBSetup.html" title="Database setup">
          <span class="none"></span>
        Database setup</a>
            </li>
                
      <li>
  
                          <a href="DBAssertions.html" title="Assertions">
          <span class="none"></span>
        Assertions</a>
            </li>
                
      <li>
  
                          <a href="Logs.html" title="Logging format">
          <span class="none"></span>
        Logging format</a>
            </li>
                
      <li>
  
                          <a href="Compatibility.html" title="Compatibility">
          <span class="none"></span>
        Compatibility</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="Javadoc">
          <span class="none"></span>
        Javadoc</a>
            </li>
                              <li class="nav-header">Tutorial</li>
                              
      <li>
  
                          <a href="Tutorial.html" title="Guide">
          <span class="none"></span>
        Guide</a>
            </li>
                
      <li>
  
                          <a href="http://github.com/edrdo/jdbdt-tutorial" class="externalLink" title="Code @ GitHub">
          <span class="none"></span>
        Code @ GitHub</a>
            </li>
                              <li class="nav-header">Development</li>
                              
      <li>
  
                          <a href="http://search.maven.org/#search%7Cga%7C1%7Cjdbdt" class="externalLink" title="Maven Central">
          <span class="none"></span>
        Maven Central</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/edrdo/jdbdt/" class="externalLink" title="Source code">
          <span class="none"></span>
        Source code</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/edrdo/jdbdt/issues/" class="externalLink" title="Issue tracker">
          <span class="none"></span>
        Issue tracker</a>
            </li>
                
      <li>
  
                          <a href="https://travis-ci.org/edrdo/jdbdt/" class="externalLink" title="Continuous integration">
          <span class="none"></span>
        Continuous integration</a>
            </li>
                
      <li>
  
                          <a href="Inception.html" title="Inception">
          <span class="none"></span>
        Inception</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Data sets</h1>
<p>A <tt>DataSet</tt> object represents a collection of rows for a <a href="DataSources.html">data source</a> that may be used for database <a href="DBSetup.html">setup</a> or <a href="DBAssertions.html">verification</a>.</p>
<div class="section">
<h2><a name="Creation"></a>Creation</h2>
<p><a name="Creation"></a></p>
<p>The examples below define data sets for a <a href="DataSources.html#Table">table</a> (<tt>Table</tt>) object, but the definition of data sets works similarly for <a href="DataSources.html#Query">queries</a> (<tt>Query</tt>).</p>
<div class="section">
<h3><a name="Plain_definition"></a>Plain definition</h3>
<p><a name="Creation.Plain"></a></p>
<p>In the simplest manner, <tt>DataSet</tt> objects are created through the <tt>data</tt> JDBDT facade method, typically followed by a chained sequence of calls.</p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">import static org.jdbdt.JDBDT.*;
import org.jdbdt.DataSet;
import org.jdbdt.DB;
import org.jdbdt.Table;
...
DB db = ...;
Table t = table(&quot;USERS&quot;)
         .columns(&quot;ID&quot;, &quot;LOGIN&quot;, &quot;NAME&quot;, &quot;PASSWORD&quot;, &quot;CREATED&quot;)
         .build(db);

DataSet users
   = data(t)
    .row(0,   &quot;root&quot;,  &quot;Root User&quot;,  &quot;god&quot;,       null)
    .row(101, &quot;john&quot;,  &quot;John Doe&quot;,   &quot;justDoeIt&quot;, Date.valueOf(&quot;2014-07-12&quot;))
    .row(102, &quot;harry&quot;, &quot;Harry H&quot;,    &quot;meta&quot;,      Date.valueOf(&quot;2016-01-01&quot;))
    .row(103, &quot;guest&quot;, &quot;Guest User&quot;, &quot;welcome&quot;,   Date.valueOf(&quot;2016-01-02&quot;));
</pre></div></div></div>
<div class="section">
<h3><a name="Typed_data_sets"></a>Typed data sets</h3>
<p><a name="Creation.Typed"></a></p>
<p><tt>TypedDataSet</tt> is a typed extension of <tt>DataSet</tt>. It allows for a simple form of (one-way) object-relational mapping through conversion functions expressed by the <tt>Conversion</tt> interface. A <tt>Conversion</tt> instance defines a mapping from objects to rows, where each row is expressed as an array of column values.</p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">import static org.jdbdt.JDBDT.*;
import org.jdbdt.TypedDataSet;
import org.jdbdt.DB;
import org.jdbdt.Table;
...
DB db = ...;
Table t = table(&quot;USERS&quot;)
         .columns(&quot;ID&quot;, &quot;LOGIN&quot;, &quot;NAME&quot;, &quot;PASSWORD&quot;, &quot;CREATED&quot;)
         .build(db);

Conversion&lt;User&gt; conv = u -&gt; new Object[] {  
                          u.getID(), 
                          u.getLogin(),
                          u.getPassword(),
                          u.getCreationDate() 
                        };
User root = ..., john = ..., harry = ..., guest = ...;
List&lt;User&gt; listOfOtherUsers ...;  

TypedDataSet&lt;User&gt; userSet  
   = data(t, conv)
    .row(root)
    .rows(john, harry, guest)
    .rows(listOfOtherUsers);
</pre></div></div></div>
<div class="section">
<h3><a name="Data_set_builders"></a>Data set builders</h3>
<p><a name="Creation.Builder"></a></p>
<p>A <tt>DataSetBuilder</tt> instance can be used to define or augment a data set with the aid of expressive column filler methods. For instance, there are column fillers for value sequences or pseudo-random values. Many of the column fillers may be defined concisely, for example making use of lambda expressions, arrays, or collections.</p>
<p>The <tt>builder</tt> facade method creates a builder for a fresh data set and the <tt>DataSet.build</tt> method lets you add rows to a previously defined data set.</p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">import static org.jdbdt.JDBDT.*;
import org.jdbdt.DB;
import org.jdbdt.Table;
import org.jdbdt.DataSet;
...
DB db = ...;
Table t = table(&quot;USERS&quot;)
         .columns(&quot;ID&quot;, &quot;LOGIN&quot;, &quot;NAME&quot;, &quot;PASSWORD&quot;, &quot;CREATED&quot;)
         .build(db);    

// Create a fresh data set with 9 rows
DataSet data = 
   builder(t)
  .sequence(&quot;ID&quot;, 1) // 1, 2, 3, ...
  .sequence(&quot;LOGIN&quot;, &quot;harry&quot;, &quot;mark&quot;, &quot;john&quot;)
  .sequence(&quot;NAME&quot;, &quot;Harry H&quot;, &quot;Mark M&quot;, &quot;John J&quot;)
  .sequence(&quot;PASSWORD&quot;, i -&gt; &quot;password &quot; + i , 1)
  .random(&quot;CREATED&quot;, Date.valueOf(&quot;2015-01-01&quot;), Date.valueOf(&quot;2015-12-31&quot;))
  .generate(3) // generate 3 rows, 
  .sequence(&quot;LOGIN&quot;, i -&gt; &quot;guest_&quot; + i, 4)  // &quot;user_4&quot;, &quot;user_5&quot;, ...
  .sequence(&quot;NAME&quot;, i -&gt; &quot;Guest User &quot; + i, 4) // &quot;Guest User 4&quot;, ...
  .value(&quot;password&quot;, &quot;samePasswordForAllGuests&quot;) 
  .generate(6) // 6 more rows keeping ID sequence and CREATED random filler
  .data();   

// Add 500 more rows to the data set
data.build()
    .sequence(&quot;ID&quot;, 1000) // 1000, 1001, ... 
    .sequence(&quot;LOGIN&quot;, i -&gt; &quot;anotherUser&quot; + i, 1000)
    .sequence(&quot;NAME&quot;, i -&gt; &quot;Yet Another User&quot; + i, 1000)
    .random(&quot;PASSWORD&quot;, &quot;aeiou&quot;, &quot;qwerty&quot;, &quot;12345&quot;, &quot;pass is the password&quot;)
    .nullValue(&quot;CREATED&quot;) // set to NULL
    .generate(500);
</pre></div></div></div></div>
<div class="section">
<h2><a name="Read-only_data_sets"></a>Read-only data sets</h2>
<p><a name="ReadOnly"></a></p>
<p>A data set is marked read-only when defined as a <a href="DBAssertions.html#Snapshots">database snapshot</a>. Any attempt to modify it subsequently will cause an <tt>InvalidOperationException</tt>.</p></div>
<div class="section">
<h2><a name="Summary_of_methods"></a>Summary of methods</h2>
<p><a name="MethodReference"></a></p>
<div class="section">
<h3><a name="JDBDT"></a><tt>JDBDT</tt></h3>
<p>Object creation - for a <a href="DataSources.html">data source</a> <tt>s</tt>:</p>

<ul>
  
<li><tt>data(s)</tt> creates a new data set.</li>
  
<li><tt>data(s, c)</tt> creates a new typed data set with conversion function <tt>c</tt>.</li>
  
<li><tt>builder(s)</tt> creates a data set builder with an underlying fresh data set.</li>
  
<li><tt>empty(s)</tt> returns an empty &amp; read-only data set that is unique for <tt>s</tt>.</li>
</ul>
<p>Debugging:</p>

<ul>
  
<li><tt>dump(s, out)</tt> dump database contents of data source <tt>s</tt> to stream/file <tt>out</tt>.</li>
  
<li><tt>dump(data, out)</tt> dump the contents of data set <tt>data</tt> to stream/file <tt>out</tt>.</li>
</ul></div>
<div class="section">
<h3><a name="DataSet_TypedDataSet"></a><tt>DataSet</tt>, <tt>TypedDataSet</tt></h3>
<p>Properties:</p>

<ul>
  
<li><tt>size()</tt> returns the number of rows.</li>
  
<li><tt>isEmpty()</tt> indicates if the data set is empty.</li>
  
<li><tt>isReadOnly()</tt> indicates if the data set is read-only.</li>
  
<li><tt>getDataSource()</tt> returns the <a href="DataSources.html">data source</a> instance for the data set.</li>
</ul>
<p>Mutators:</p>

<ul>
  
<li><tt>row</tt> and <tt>rows</tt> methods add rows to the data set (see examples above).</li>
  
<li><tt>build()</tt> creates a new data set builder backed up by the data set (see example above).</li>
  
<li><tt>add(other)</tt> adds all rows from <tt>other</tt> to the data set.</li>
  
<li><tt>setReadOnly()</tt> sets the data set as read-only.</li>
</ul>
<p>Utility methods (all <tt>static</tt>):</p>

<ul>
  
<li><tt>copyOf(data)</tt> returns a new data set that has the same rows as <tt>data</tt>.</li>
  
<li><tt>join(data1, data2, ...,)</tt> returns a new data set that contains all the rows in <tt>data1</tt>, <tt>data2</tt>, &#x2026;</li>
  
<li><tt>subset(data, index, n)</tt> returns a new data set containing <tt>n</tt> rows of <tt>data</tt> starting from the <tt>index</tt>-th row.</li>
  
<li><tt>singleton(data, i)</tt> returns a new data set containing only the <tt>index</tt>-th row in <tt>data</tt>.</li>
  
<li><tt>first(data, n)</tt> returns a new data set containing the first <tt>n</tt> rows of <tt>data</tt>.</li>
  
<li><tt>last(data, n)</tt> returns a new data set containing the last <tt>n</tt> rows of <tt>data</tt>.</li>
</ul></div>
<div class="section">
<h3><a name="DataSetBuilder"></a><tt>DataSetBuilder</tt></h3>

<ul>
  
<li><tt>data()</tt> returns the underlying data set.</li>
  
<li><tt>generate(n)</tt> adds <tt>n</tt> rows to the underlying data set based on the current column filler settings.</li>
  
<li><tt>nullValue(column)</tt> sets a <tt>NULL</tt> value filler for <tt>column</tt>.</li>
  
<li><tt>value(column, v)</tt> sets a constant filler with value <tt>v</tt> for <tt>column</tt>.</li>
  
<li><tt>sequence(column, ...)</tt> defines a sequence fillers for <tt>column</tt> (several method variants).</li>
  
<li><tt>random(column, ...)</tt> defines a pseudo-random filler for <tt>column</tt> (several method variants).</li>
  
<li><tt>set(column, filler)</tt> defines a custom column filler for <tt>column</tt>.</li>
</ul></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016&#x2013;2017
                        <a href="http://jdbdt.org">JDBDT</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
