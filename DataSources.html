<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2018-12-11 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20181211" />
    <meta http-equiv="Content-Language" content="en" />
    <title>JDBDT &#x2013; Data sources</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="images/jdbdt-logo.png"  alt="JDBDT"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2018-12-11
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.2.0
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">JDBDT</li>
                              
      <li>
  
                          <a href="index.html" title="Home">
          <span class="none"></span>
        Home</a>
            </li>
                
      <li>
  
                          <a href="MIT_License.html" title="License">
          <span class="none"></span>
        License</a>
            </li>
                              <li class="nav-header">Reference</li>
                              
      <li>
  
                          <a href="Facade.html" title="API facade">
          <span class="none"></span>
        API facade</a>
            </li>
                
      <li>
  
                          <a href="DB.html" title="Database handles">
          <span class="none"></span>
        Database handles</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Data sources</a>
          </li>
                
      <li>
  
                          <a href="DataSets.html" title="Data sets">
          <span class="none"></span>
        Data sets</a>
            </li>
                
      <li>
  
                          <a href="DBSetup.html" title="Database setup">
          <span class="none"></span>
        Database setup</a>
            </li>
                
      <li>
  
                          <a href="DBAssertions.html" title="Assertions">
          <span class="none"></span>
        Assertions</a>
            </li>
                
      <li>
  
                          <a href="Logs.html" title="Logging format">
          <span class="none"></span>
        Logging format</a>
            </li>
                
      <li>
  
                          <a href="Compatibility.html" title="Compatibility">
          <span class="none"></span>
        Compatibility</a>
            </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="Javadoc">
          <span class="none"></span>
        Javadoc</a>
            </li>
                              <li class="nav-header">Tutorial</li>
                              
      <li>
  
                          <a href="Tutorial.html" title="Guide">
          <span class="none"></span>
        Guide</a>
            </li>
                
      <li>
  
                          <a href="http://github.com/JDBDT/jdbdt-tutorial" class="externalLink" title="Code @ GitHub">
          <span class="none"></span>
        Code @ GitHub</a>
            </li>
                              <li class="nav-header">Development</li>
                              
      <li>
  
                          <a href="http://search.maven.org/#search%7Cga%7C1%7Cjdbdt" class="externalLink" title="Maven Central">
          <span class="none"></span>
        Maven Central</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/JDBDT/jdbdt/" class="externalLink" title="Source code">
          <span class="none"></span>
        Source code</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/JDBDT/jdbdt/issues/" class="externalLink" title="Issue tracker">
          <span class="none"></span>
        Issue tracker</a>
            </li>
                
      <li>
  
                          <a href="https://travis-ci.org/JDBDT/jdbdt/" class="externalLink" title="Travis CI">
          <span class="none"></span>
        Travis CI</a>
            </li>
                
      <li>
  
                          <a href="https://ci.appveyor.com/project/edrdo/jdbdt" class="externalLink" title="AppVeyor CI">
          <span class="none"></span>
        AppVeyor CI</a>
            </li>
                
      <li>
  
                          <a href="https://sonarcloud.io/organizations/jdbdt/projects" class="externalLink" title="SonarCloud">
          <span class="none"></span>
        SonarCloud</a>
            </li>
                
      <li>
  
                          <a href="https://scan.coverity.com/projects/edrdo-jdbdt" class="externalLink" title="Coverity">
          <span class="none"></span>
        Coverity</a>
            </li>
                
      <li>
  
                          <a href="project-info.html" title="Maven reports">
          <span class="none"></span>
        Maven reports</a>
            </li>
                
      <li>
  
                          <a href="Inception.html" title="Inception">
          <span class="none"></span>
        Inception</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Data sources</h1>
<p><tt>DataSource</tt> objects represent tables and queries that are used for database  <a href="DBSetup.html">setup</a> or <a href="DBAssertions.html">assertions</a>.</p>
<p><a name="Table"></a></p>
<div class="section">
<h2><a name="Tables"></a>Tables</h2>
<p><a name="Table_Builder"></a></p>
<div class="section">
<h3><a name="Using_table_builders"></a>Using table builders</h3>
<p>Tables are represented by <tt>Table</tt>, a subclass of <tt>DataSource</tt>. A table is created using a builder (<tt>TableBuilder</tt>), as returned by the <tt>table</tt> facade method. In association, the <tt>columns</tt> should be used to specify the table columns of interest, and the <tt>build</tt> method to build the actual <tt>Table</tt> object in association to a <a href="DB.html">database handle</a>.</p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">import static org.jdbdt.JDBDT.*;
import org.jdbdt.DB;
import org.jdbdt.Table;
...
DB db = ...;
Table userTable = table(&quot;USER&quot;)
                 .columns(&quot;LOGIN&quot;, &quot;NAME&quot;, &quot;PASSWORD&quot;, &quot;CREATED&quot;)
                 .build(db);
</pre></div></div>
<p><a name="Table_Key"></a></p></div>
<div class="section">
<h3><a name="Key_columns_for_a_table"></a>Key columns for a table</h3>
<p>In addition, if you wish to perform updates and deletes using data sets, <tt>key</tt> can be used to define the columns that form the table&#x2019;s primary key (or that in some other form identify each database row uniquely) </p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint"> Table userTable = table(&quot;USER&quot;)
                  .columns(&quot;LOGIN&quot;, &quot;NAME&quot;, &quot;PASSWORD&quot;, &quot;CREATED&quot;)
                  .key(&quot;LOGIN&quot;)
                  .build(db);
</pre></div></div>
<p><a name="Query"></a></p></div></div>
<div class="section">
<h2><a name="Queries"></a>Queries</h2>
<p>Queries are represented by <tt>Query</tt>, a subclass of <tt>DataSource</tt>. A <tt>Query</tt> object can be created from a raw SQL statements or using a <tt>QueryBuilder</tt>. </p>
<p><a name="RawQuery"></a></p>
<div class="section">
<h3><a name="Definition_from_raw_SQL"></a>Definition from raw SQL</h3>
<p>The <tt>query</tt> facade method may be used to define a query using raw SQL.</p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">import static org.jdbdt.JDBDT.*;
import org.jdbdt.DB;
import org.jdbdt.Query;
...
DB db = ...;
// Query user login and name by id.
int idArgument = ...;
Query q = query(db, &quot;SELECT LOGIN, NAME FROM USER WHERE ID = ?&quot;, idArgument);
</pre></div></div>
<p><a name="QueryBuilder"></a></p></div>
<div class="section">
<h3><a name="Definition_using_QueryBuilder"></a>Definition using <tt>QueryBuilder</tt></h3>
<p><tt>QueryBuilder</tt> objects can be used to define queries programmatically. The <tt>select</tt> facade method creates a query builder that can be parameterized using a chained sequence of calls. A final call to <tt>build</tt> in such a sequence creates a <tt>Query</tt> object for a given database. The parameterization methods are the following:</p>

<ul>
  
<li><tt>from</tt>: defines the <tt>FROM</tt> clause;</li>
  
<li><tt>where</tt>: defines a <tt>WHERE</tt> clause;</li>
  
<li><tt>distinct</tt>: defines a <tt>DISTINCT</tt> modifier for the query;</li>
  
<li><tt>orderBy</tt>: defines an <tt>ORDER BY</tt> clause;</li>
  
<li><tt>groupBy</tt>: defines a <tt>GROUP BY</tt> clause;</li>
  
<li><tt>having</tt>: defines a <tt>HAVING</tt> clause.</li>
  
<li><tt>arguments</tt>: supply arguments for the query.</li>
</ul>
<p>Note to <tt>orderBy</tt>: <a href="DBAssertions.html">database assertions</a> are insensitive to the order of query results, but the use of <tt>orderBy</tt> may make it easier to inspect <a href="Logs.html">logs</a> in some cases.</p>
<p><i>Illustration</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">import static org.jdbdt.JDBDT.*;
import org.jdbdt.DB;
import org.jdbdt.Query;
...
DB db = ...;

// [1] Query user login and name by id 
int userId = ...;
Query q1 = select(&quot;LOGIN&quot;, &quot;NAME&quot;)
          .from(&quot;USER&quot;)
          .where(&quot;ID = ?&quot;)
          .arguments(userId)
          .build(db);

// [2] Query distinct passwords in use
Query q2 = select(&quot;PASSWORD&quot;)
          .distinct()
          .from(&quot;USER&quot;)
          .orderBy(&quot;PASSWORD&quot;)
          .build(db);

// [3]&#xa0;Get passwords that are used by more than one user and their count.
Query q3 = select(&quot;PASSWORD&quot;, &quot;COUNT(*)&quot;)
          .from(&quot;USER&quot;)
          .groupBy(&quot;PASSWORD&quot;)
          .having(&quot;COUNT(*) &gt; 1&quot;)
          .build(db);

// [4] Get pairs of users that have the same password.
Query q4 = select(&quot;u1.LOGIN&quot;, &quot;u2.LOGIN&quot;)
          .from(&quot;USER u1&quot;, &quot;USER u2&quot;)
          .where(&quot;u1.LOGIN &lt;&gt; u2.LOGIN AND u1.PASSWORD = u2.PASSWORD&quot;)
          .build(db);
</pre></div></div>
<p><a name="SummaryOfMethods"></a></p></div></div>
<div class="section">
<h2><a name="Summary_of_API_methods"></a>Summary of API methods</h2>
<div class="section">
<h3><a name="JDBDT"></a><tt>JDBDT</tt></h3>

<ul>
  
<li><tt>table(name)</tt> creates a new <tt>TableBuilder</tt> with table name set to <tt>name</tt>.</li>
  
<li><tt>query(db, sql [,args])</tt> creates a new <tt>Query</tt> data source from SQL code.</li>
  
<li><tt>select(cols)</tt> creates a new <tt>QueryBuilder</tt> with columns set to <tt>cols</tt>.</li>
</ul></div>
<div class="section">
<h3><a name="DataSource"></a><tt>DataSource</tt></h3>

<ul>
  
<li><tt>getDB()</tt> returns the database handle.</li>
  
<li><tt>getSQLForQuery()</tt> yields the SQL code used for querying the database.</li>
  
<li><tt>getColumnCount()</tt> returns the number of columns for the data source.</li>
  
<li><tt>getColumns()</tt> returns the list of columns.</li>
  
<li><tt>getColumnName(i)</tt> returns the name of the column with index <tt>i</tt>.</li>
</ul></div>
<div class="section">
<h3><a name="Table"></a><tt>Table</tt></h3>

<ul>
  
<li><tt>getName()</tt> returns the table name.</li>
</ul></div>
<div class="section">
<h3><a name="TableBuilder"></a><tt>TableBuilder</tt></h3>

<ul>
  
<li><tt>columns(cols)</tt> set the table columns to cols.</li>
  
<li><tt>key(cols)</tt> set the key columns to consider (optional).</li>
  
<li><tt>name(t)</tt> sets the table name to <tt>t</tt>.</li>
  
<li><tt>build(db)</tt> builds the desired <tt>Table</tt> for database <tt>db</tt>.</li>
</ul></div>
<div class="section">
<h3><a name="QueryBuilder"></a><tt>QueryBuilder</tt></h3>

<ul>
  
<li><tt>columns(cols)</tt> sets the query columns to <tt>cols</tt>.</li>
  
<li><tt>from</tt>, <tt>where</tt>, <tt>distinct</tt>, <tt>groupBy</tt>, <tt>orderBy</tt>, <tt>having</tt>, <tt>arguments</tt>: query parameterization methods (see <a href="DataSources.html#QueryBuilder">above</a>).</li>
  
<li><tt>build(db)</tt> builds the desired <tt>Query</tt> for database <tt>db</tt>.</li>
</ul></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2016&#x2013;2018
                        <a href="http://jdbdt.org">JDBDT</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
